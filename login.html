<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acceso Institucional - Hospital Regional Puerto Vallarta</title>
    <link href="estilos.css" rel="stylesheet">
    <style>
        input[type="text"],
        input[type="password"] {
          width: 100%;
          padding: 0.6rem;
          border-radius: 8px;
          border: 1px solid rgba(255, 255, 255, 0.2);
          background: rgba(255, 255, 255, 0.1);
          color: white;
          font-size: 0.85rem;
          backdrop-filter: blur(5px);
          transition: all 0.3s ease;
        }
        
        input::placeholder {
          color: rgba(255, 255, 255, 0.6);
        }
        
        input:focus {
          outline: none;
          background: rgba(255, 255, 255, 0.2);
          box-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
        }
        .glass.success { background: rgba(70, 227, 99, 0.35); }
        .glass.error { background: rgba(240, 50, 60, 0.45); }
    </style>
</head>
<body>
    <div class="glass" id="loginForm">
        <div class="header">
            <div class="logo">
                <span class="logo-icon">üîê</span>
                <h1>Acceso Institucional</h1>
            </div>
        </div>

        <div class="status">
            <p>Ingresa tus credenciales para continuar</p>
        </div>

        <form id="formularioLogin">
            <div class="grid">
                    <h3>Usuario</h3>
                    <input type="text" name="usuario" placeholder="ej. j.ramirez" required>
                    <h3>Contrase√±a</h3>
                    <input type="password" name="clave" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                <!--div class="celda">
                < <div class="celda">
                </div>
                </div-->
            </div>

            <div class="botones">
                <button type="submit">Iniciar sesi√≥n</button>
                <button type="reset">Limpiar</button>
            </div>
        </form>

        <footer>
          <p id="footerText">Hecho con ‚ù§Ô∏è por Ricardo ¬∑ 2023</p>
        </footer>
  
    </div>

<script>
    function setEstado(estado) {
      const dashboard = document.getElementById('dashboard');
      const estadoTexto = document.getElementById('estadoTexto');
      dashboard.classList.remove('loading', 'success', 'error');
      dashboard.classList.add(estado);

      switch (estado) {
        case 'loading':
          estadoTexto.innerHTML = '<i class="fas fa-sync fa-spin"></i> Cargando sistema...';
          break;
        case 'success':
          estadoTexto.innerHTML = '<i class="fas fa-check-circle"></i> Sistema operativo con √©xito ‚úÖ';
          break;
        case 'error':
          estadoTexto.innerHTML = '<i class="fas fa-exclamation-circle"></i> Error detectado ‚ùå';
          break;
      }
    }

    // Footer din√°mico
    document.getElementById('footerText').innerHTML =
      `Hecho con ‚ù§Ô∏è por Ricardo ¬∑ ${new Date().getFullYear()}`;
</script>

<script>
document.getElementById("formularioLogin").addEventListener("submit", async function(e) {
  e.preventDefault();
  const usuario = e.target.usuario.value;
  const clave = e.target.clave.value;

  const respuesta = await fetch("https://script.google.com/macros/s/AKfycbzkCh4Ib4ci3Tlw_XBfslfIN7x56DTM4KSudjBOIYrMNiNyJvPJ231-uyM5j6-5XifL/exec", {
    method: "POST",
    body: JSON.stringify({ usuario, clave }),
    headers: { "Content-Type": "application/json" }
  });

  const resultado = await respuesta.json();

  if (resultado.success) {
    document.getElementById("loginForm").classList.add("glass", "success");
    setTimeout(() => {
      window.location.href = resultado.rol === "admin" ? "admin.html" : "dashboard.html";
    }, 1500);
  } else {
    document.getElementById("loginForm").classList.add("glass", "error");
    alert("Error: " + resultado.error);
    setTimeout(() => {
      document.getElementById("loginForm").classList.remove("error");
    }, 2000);
  }
});
</script>

</body>
</html>
